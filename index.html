<!DOCTYPE html>
<html lang="en-US">
  <head>
	  <title> Year in pixels </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Delius+Unicase&display=swap" rel="stylesheet">
	  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
	  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.0.0/uicons-brands/css/uicons-brands.css'>
	  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  <meta name="description" content="your mood tracker in pixels">
	  <meta charset="utf-8">
	  <meta name="author" content="Valentina Conte">
	  <style>
	  /*link*/
	  a:link{
    	color: #ffa600;
    	background-color: transparent;
    	text-decoration: none;
    }
      a:visited{
    	color: #0a1538;
    }
      a:hover{
    	color: #582bc2;
    }
      a:active{
    	color: #412f85;
    } 
	  /*corpo*/
	  html{
	   background: rgb(0,0,0);
       background-image: url(https://wallpaper.dog/large/20483557.jpg);
       background-attachment: fixed;
       background-size: contain; 
       font-family: 'Delius Unicase', cursive;
       user-select: none;
       width: 900px;
       display: grid;
       grid-template-columns: repeat(8, 1fr);
       grid-template-rows: repeat(6, 1fr);
       grid-column-gap: 0px;
       grid-row-gap: 0px;
       margin: 0px;
       height: 100%;
       margin:0 auto ;
       grid-template-areas: 
	". . . . . . . ."
	". . d d d d . ."
	". . d d d d . ."
	". . d d d d . ."
	". . d d d d . ."
	". . . . . . . .";
	  }
	  
	  #outerbox {
        display: flex;
        flex-flow: column;
	    justify-content: center;
	    align-content: center;
	    text-align: center;
	    background-color: rgba(209, 22, 210, 0.7);
        border-style: solid;
        border-color: azure;
        position: fixed;
        grid-area: d;
        place-content: center;
        margin-bottom: 0;
          max-width: 100%;
        height: 100%;
	  }
	  ol, footer, #conte, #outerbox {
	    text-align: center;
	  }
	  /*tracker*/
	  .title {
          text-align: center;
	      margin: 0;
	      text-shadow: 1px 3px 1px azure;
	  }
	  #guide {
          display: flex;
          font-weight: bold;
          text-align: center; 
            justify-content: center;
  align-items: center;
          flex-flow: row;

      &:hover {
          cursor: pointer;
          }

       #selectedMood span {
           width: 1em;
           height: 1em;
           display: inline-block;
           vertical-align: middle;
           
   }
  }
 }
          
#moods {
    display: flex;
    text-align: center;
    align-content: center;
    justify-content: center;
          
  div {
    position: absolute;
    margin: 0 1em;
    padding-left: 1.25em;
          }
    span {
      top: 0.25em;
      width: 1em;
      height: 1em;
    }
          }

.content {
  display: inline-flex;
  flex-direction: column;
  text-align: center;
  position: relative;
  align-items: center;
}

#yearContainer,
#monthHeader,
#daysHeader,
#tableContainer {
  display: flex;
  margin-bottom: 0;
    text-align: center;
}

#daysHeader {
  margin-left: 1.25em;
  margin-bottom: 0;
  margin-top: 1em;
    text-align: center;
}

.monthHeader,
.dayHeader {
  width: 1.25em;
  height: 1.25em;
  font-size: 1rem;
  padding: 1px 0 0 1px;
  text-align: center;
  font-weight: bold;
}
#monthHeader{
flex-direction: column;
}
.monthContainer {
  display: flex;
  flex-direction: column;
  align-items: stretch;

  &:hover {
    cursor: pointer;
  }
}

.dayContainer {
  width: 25px;
  height: 25px;
  border-style: solid;
  border-width: 1px;
  margin-right: -1px;
  margin-bottom: -1px;
}

@media (min-width: 769px) {
  .content {
    display: flex;
    justify-content: center;
  }

  #yearContainer {
    flex-direction: column;
  }

   .monthContainer,
  #monthHeader {
    flex-direction: column;
  }
  .dayHeader,
  #daysHeader,
  .monthContainer {
    flex-direction: row;
  }
   #outerbox, body, html {
   justify-content: center;
   margin: 0 0 0 0;
   width: 100%;
   overflow: auto;
   }
}


@media (max-width: 768px) {
   #outerbox, body, html{
   padding: 0 0 0 0;
   margin: 0 0 0 0;
   width: 100%;
   overflow: scroll;
   }
  .content {
    display: inline-flex;
    flex-direction: row;
    justify-content: center;
  }

  #yearContainer,
  #monthHeader {
    flex-direction: row;
    justify-items: self-start;
  }

  .dayHeader,
  #daysHeader,
  #tableContainer {
    flex-direction: column;
  }
  ol, footer {
	    width: 600px;
	  }
}
/*fine tracker*/

	  </style>
	  
</head>

<body class="body">
	<div id="outerbox">
	<h1 class="title">Year in pixels</h1>
	<div id="guide">
  <div id="moods"> </div>
  <div id="selectedMood">Selected mood: <span></span></div>
</div>
<div class="content" id="conte">
  <div id="daysHeader"></div>
  <div id="tableContainer">
    <div id="monthHeader"></div>
    <div id="yearContainer"></div>
  </div>
</div>
	<script>
	const COLORS = {
  0: { code: "#2DE1C2", label: "😃" },
  1: { code: "#01BAEF", label: "😊" },
  2: { code: "#AFBFC0", label: "😐" },
  3: { code: "#037171", label: "😞" },
  4: { code: "#ffa600", label: "😭" }
};

const YEAR_CONTAINER = document.getElementById("yearContainer");
const DAYS_HEADER = document.getElementById("daysHeader");
const MONTH_HEADER = document.getElementById("monthHeader");
const GUIDES = document.getElementById("guide");
const SELECTED_MOOD = document.querySelector("#selectedMood span");
const MOODS = document.getElementById("moods");
const MONTH_LETTERS = [
  "J",
  "F",
  "M",
  "A",
  "M",
  "J",
  "J",
  "A",
  "S",
  "O",
  "N",
  "D"
];

let selectedMood = null;

let init = () => {
  checkLocalStorage();
  generateVisualStructure();
  setMoods();
};

let setMoods = () => {
  let colorKeys = Object.keys(COLORS);

  colorKeys.forEach(e => {
    let mood = document.createElement("div");
    let color = document.createElement("span");

    color.style.background = getGradient(COLORS[e].code);

    mood.setAttribute("mood", e);
    color.setAttribute("mood", e);

    mood.textContent += COLORS[e].label;
    mood.appendChild(color);

    MOODS.appendChild(mood);
  });
};

let checkLocalStorage = () => {
  if (window.localStorage.structure === undefined) {
    let structure = generateDataStructure();
    localStorage.setItem("structure", JSON.stringify(structure));
  }
};

let generateDataStructure = () => {
  let data = {};

  for (let i = 0; i < 12; i++) {
    data[i] = Array.from({ length: getDaysFromMonth(i + 1) }, () => null);
  }

  return data;
};

let generateVisualStructure = () => {
  const data = getCurrentLSStructure();
  const months = Object.keys(data);
  const dayHeaderLength = 31;

  let monthHeaderSet = false;

  for (let day = 1; day <= dayHeaderLength; day++) {
    let dayHeader = document.createElement("div");
    dayHeader.className = "dayHeader";
    dayHeader.textContent = day;

    DAYS_HEADER.appendChild(dayHeader);
  }

  months.forEach(month => {
    let monthContainer = document.createElement("div");
    monthContainer.className = "monthContainer";
    let monthHeader = document.createElement("div");
    monthHeader.className = "monthHeader";
    monthHeader.textContent = MONTH_LETTERS[month];

    let days = Object.keys(data[month]);

    days.forEach(day => {
      let dayContainer = document.createElement("div");
      dayContainer.className = "dayContainer";
      dayContainer.onclick = () => {
        assignMood(month, day, dayContainer);
      };

      if (data[month][day])
        dayContainer.style.background = getGradient(
          COLORS[data[month][day]].code
        );

      monthContainer.appendChild(dayContainer);
    });

    MONTH_HEADER.appendChild(monthHeader);
    YEAR_CONTAINER.appendChild(monthContainer);
  });
};

let assignMood = (month, day, item) => {
  let data = getCurrentLSStructure();
  data[month][day] = selectedMood;

  if (selectedMood)
    item.style.background = getGradient(COLORS[selectedMood].code);

  localStorage.setItem("structure", JSON.stringify(data));
};

let getDaysFromMonth = month => new Date(2019, month, 0).getDate();
let getCurrentLSStructure = () => JSON.parse(window.localStorage.structure);
let getGradient = colorId =>
  `radial-gradient(ellipse at center, rgba(255,255,255,.1) -95%, ${colorId} 100%)`;

GUIDES.addEventListener("click", e => {
  if (e.target.attributes[0].value) {
    selectedMood = e.target.attributes[0].value;
    SELECTED_MOOD.style.background = getGradient(COLORS[selectedMood].code);
  }
});

init();

	</script>
	
	
	
	
	    
		  <ol>Instructions:
		   <li>Pick your mood by clicking on the color.</li>
			 <li>click on the corrispanding day on the grid.</li> 
			 <li>At the end of the year you will have a visual representation of your mood all throught it.</li></ol>
		
	     <footer>
			<p>Created by: Valentina Lynn. (@amygdala_lynn on discord) For: hackatron 2023.<br>
			Find me on: twitter <a href="https://twitter.com/Mereoleonasluvr" title="twitter"><i class="fi fi-brands-twitter"></i></a>
			codedex <a href="https://www.codedex.io/@ValentinaLynn" title="codedex"><i class="fi fi-rr-square-terminal"></i></a>,
			github <a href="https://github.com/lynnthegrinch" title="github"><i class="fi fi-brands-github"></i></a>,
			tumblr. <a href="https://lynnlovesthestars.tumblr.com" title="tumblr"> <i class="fi fi-brands-tumblr"></i></a> <br>
		  (though open tumblr at your own risk)
		   Uicons by <a href="https://www.flaticon.com/uicons">Flaticon</a>
		</footer>
    </div>
</body>
</html>
<!-- rgba(85, 129, 189, 1.0)
rgba(93, 85, 189, 1.0)
rgba(145, 85, 189, 1.0)-->
